<?php 

//refactoring
require 'functions.php';

//require 'router.php';

require 'Database.php';

$config = require('config.php');

  
$db = new Database($config['database']);




// The whole point of this lesson is not to inline user/data as part of a query string.
//When accepting user input/form never allow for inline as part of sql-query.

//by doing this i can grab any of the id.
//Also by doing so i introduce a measure  vulnerability there.


//$id = ($_GET['id']);

//it's what allows for sql injection. //{$id}->but when this is done then there is a problem. 
//$query = "select * from students where id = {$id}";
//dd($query);

//$students = $db->query("select * from students where id = {$id}")->fetch();//i the also inline it here.
//$students = $db->query($query)->fetch();

$id = $_GET['id'];
$query = "select * from students where id = ?"; //either :id or ?.
//there is also another to parse this 

$students = $db->query($query, [$id])->fetch();//i then also inline it here.//[':id' => $id]

dd($students);


//foreach ($students as $student){
//  echo "<li>" . $student['name'] . "</li>";
//}
